<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calvo Games - Iniciar Sesión</title>
<style>
body { font-family: Arial; background:#1e1e1e; color:#fff; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.box { background:#2c2c2c; padding:30px; border-radius:12px; width:320px; text-align:center; }
input { width:90%; padding:10px; margin:8px 0; border-radius:6px; border:none; }
button { width:95%; padding:10px; margin:10px 0; border-radius:6px; border:none; background:#ff9800; color:#fff; font-weight:bold; cursor:pointer; }
button:hover { background:#e68a00; }
#status { font-size:0.9em; color:#ccc; }
a { color:#ff9800; text-decoration:none; display:block; margin-top:10px; }
</style>
</head>
<body>

<div class="box">
  <h2>Iniciar Sesión</h2>
  <input type="email" id="email" placeholder="Correo">
  <input type="password" id="password" placeholder="Contraseña">
  <button onclick="login()">Iniciar sesión</button>
  <p id="status">No hay sesión iniciada</p>
  <a href="/register">¿No tienes cuenta? Regístrate</a>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAqprLLzZIfM2WnJsHISksgraZ2NJnQnRw",
  authDomain: "calvogames-v1.firebaseapp.com",
  projectId: "calvogames-v1",
  storageBucket: "calvogames-v1.firebasestorage.app",
  messagingSenderId: "490748488828",
  appId: "1:490748488828:web:eb32857a4e203ce33b6df9",
  measurementId: "G-334HNXG644"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const status = document.getElementById('status');

window.login = () => {
  const email = document.getElementById('email').value;
  const pass = document.getElementById('password').value;
  signInWithEmailAndPassword(auth, email, pass)
    .then(userCredential => {
      // Login correcto
      window.location.href = "/index.html";
    })
    .catch(error => {
      // Mostrar error si la cuenta no existe o contraseña incorrecta
      status.textContent = "Error: " + error.message;
    });
};

onAuthStateChanged(auth, user => {
  if(user) status.textContent = "Conectado como: " + (user.displayName || user.email);
  else status.textContent = "No hay sesión iniciada";
});
</script>

</body>
</html>
