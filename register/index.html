<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAqprLLzZIfM2WnJsHISksgraZ2NJnQnRw",
    authDomain: "calvogames-v1.firebaseapp.com",
    projectId: "calvogames-v1",
    storageBucket: "calvogames-v1.firebasestorage.app",
    messagingSenderId: "490748488828",
    appId: "1:490748488828:web:eb32857a4e203ce33b6df9",
    measurementId: "G-334HNXG644"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const btn = document.getElementById('registerBtn');
  const status = document.getElementById('status');

  btn.addEventListener('click', () => {
    btn.classList.add('active');
    setTimeout(() => btn.classList.remove('active'), 300);

    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const pass = document.getElementById('password').value.trim();

    if (!name || !email || !pass) {
      status.textContent = "Todos los campos son obligatorios.";
      status.className = "error";
      return;
    }

    status.textContent = "Registrando usuario...";
    status.className = "";

    createUserWithEmailAndPassword(auth, email, pass)
      .then(userCredential => {
        return updateProfile(userCredential.user, { displayName: name });
      })
      .then(() => {
        status.textContent = "Â¡Usuario registrado correctamente! Redirigiendo...";
        status.className = "success";
        setTimeout(() => window.location.href = "/index.html", 1500);
      })
      .catch(error => {
        status.textContent = error.message;
        status.className = "error";
        console.error(error);
      });
  });
</script>
