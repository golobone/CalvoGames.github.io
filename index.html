<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalvoGames</title>
    
    <meta name="description" content="CalvoGames es una web de juegos indie y proyectos en desarrollo con descargas directas y próximos lanzamientos.">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <meta property="og:title" content="CalvoGames">
    <meta property="og:description" content="Juegos indie en desarrollo con descarga directa y próximos lanzamientos.">
    <meta property="og:image" content="./favicon.ico">
    <meta property="og:url" content="https://calvogames.pages.dev">
    <meta property="og:type" content="website">

    <script defer src="./Calvo Games_files/polyfills-42372ed130431b0a.js.descarga"></script>
    <script defer src="./Calvo Games_files/webpack-690dccbbaad5594b.js.descarga"></script>
    <script defer src="./Calvo Games_files/framework-a6206a8cb1eb1bbb.js.descarga"></script>
    <script defer src="./Calvo Games_files/main-64a32274863b6c59.js.descarga"></script>
    <script defer src="./Calvo Games_files/_app-dfa90b930aea53e3.js.descarga"></script>
    
    <script defer src="./Calvo Games_files/da690673-7462c6c826afa27d.js.descarga"></script>
    <script defer src="./Calvo Games_files/f7f4f538-8d292738a322fbc1.js.descarga"></script>
    <script defer src="./Calvo Games_files/8e04e354-1a48448611665374.js.descarga"></script>
    <script defer src="./Calvo Games_files/9b6c5ff0-df69facb21d7f3ce.js.descarga"></script>
    <script defer src="./Calvo Games_files/55fae009-d2f8e54b0ff4d8a7.js.descarga"></script>
    <script defer src="./Calvo Games_files/1988a2b6-724fe6610f4cfc4c.js.descarga"></script>
    <script defer src="./Calvo Games_files/632abcf6-daa6336b356f7adc.js.descarga"></script>
    <script defer src="./Calvo Games_files/5862a045-7f5947710223262d.js.descarga"></script>
    <script defer src="./Calvo Games_files/17c69435-983ac9cd33de50e2.js.descarga"></script>
    <script defer src="./Calvo Games_files/9179-1abc554145d02637.js.descarga"></script>
    <script defer src="./Calvo Games_files/4034-9d066512fd6580fb.js.descarga"></script>
    <script defer src="./Calvo Games_files/[docId]-b9d560bb7f9b9848.js.descarga"></script>
    <script defer src="./Calvo Games_files/_buildManifest.js.descarga"></script>
    <script defer src="./Calvo Games_files/_ssgManifest.js.descarga"></script>

    <style>
        :root {
            --block-margin: 1.125em;
            --body-font: inherit;
            --body-font-weight: 400;
            --body-color: inherit;
            --link-color: #0070f3;
            --link-color-hover: #0051ad;
        }

        .card-content {
            height: 100%;
            outline: 0;
            line-height: var(--line-height-body);
            letter-spacing: var(--letter-spacing-body);
            --grid-border: 1px;
            --grid-padding: 1.22em;
        }

        .block {
            margin: var(--block-margin) 0;
            font-family: var(--body-font);
            font-weight: var(--body-font-weight);
            color: var(--body-color);
        }

        a.link {
            color: var(--text-color, var(--link-color));
            cursor: pointer;
            font-weight: bold;
            text-decoration: underline;
        }

        a.link:hover {
            color: var(--text-color, var(--link-color-hover));
        }

        /* Estilos del Panel de Usuario */
        #user-panel {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            font-family: sans-serif;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            background: #555;
        }

        .btn-owner-cg { background: #4caf50; color: white; padding: 6px 12px; border-radius: 4px; border: none; cursor: pointer; }
        .btn-admin-cg { background: #f44336; color: white; padding: 6px 12px; border-radius: 4px; border: none; cursor: pointer; }
        .btn-sesion-cg { cursor: pointer; font-weight: bold; text-decoration: none; color: inherit; }
    </style>
</head>
<body>

    <div id="user-panel">
        <div id="user-letra" class="user-avatar">?</div>
        <div id="user-nombre">Invitado</div>
        <button id="panel-btn" style="display: none;"></button>
        <div id="session-container">
            <a href="login/" class="btn-sesion-cg">Iniciar Sesión</a>
        </div>
    </div>

    <script>
        const OWNER_EMAIL = "tu_email@ejemplo.com"; // CAMBIA ESTO POR TU EMAIL

        cgAuth.onAuthStateChanged((user) => {
            const letra = document.getElementById('user-letra');
            const nombre = document.getElementById('user-nombre');
            const panelBtn = document.getElementById('panel-btn');
            const container = document.getElementById('session-container');

            if (user) {
                // Usuario Conectado
                nombre.innerText = user.displayName || "Usuario";
                letra.innerText = (user.displayName || "U").charAt(0).toUpperCase();
                letra.style.background = "#ff9800";
                
                container.innerHTML = '<span class="btn-sesion-cg" id="cg-logout" style="color:#aaa">Cerrar Sesión</span>';
                document.getElementById('cg-logout').onclick = () => cgAuth.signOut().then(() => location.reload());

                // Verificación de Rango
                if (user.email === OWNER_EMAIL) {
                    panelBtn.style.display = "block";
                    panelBtn.className = "btn-owner-cg"; 
                    panelBtn.innerText = "⭐ OWNER PANEL";
                } else {
                    cgDb.collection("users").doc(user.uid).get().then((doc) => {
                        if (doc.exists && doc.data().rol === "admin") {
                            panelBtn.style.display = "block";
                            panelBtn.className = "btn-admin-cg";
                            panelBtn.innerText = "⚙️ ADMIN PANEL";
                        }
                    });
                }
            } else {
                // Usuario Desconectado
                letra.innerText = "?";
                letra.style.background = "#555";
                nombre.innerText = "Invitado";
                panelBtn.style.display = "none";
                container.innerHTML = '<a href="login/" class="btn-sesion-cg">Iniciar Sesión</a>';
            }
        });
    </script>

</body>
</html>